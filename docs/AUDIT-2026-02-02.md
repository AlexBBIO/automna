# Documentation Audit - 2026-02-02

## Scope
Comprehensive review of all Automna documentation against actual implementation.

---

## SPEC.md (Main Specification)

**File:** `/root/clawd/projects/automna/SPEC.md`  
**Lines:** 1764  
**Status:** NEEDS MAJOR UPDATE

### Section-by-Section Audit

| Section | Lines | Status | Notes |
|---------|-------|--------|-------|
| Header/Version | 1-10 | ⚠️ UPDATE | Version 0.2, Date 2026-01-29 - needs update |
| Current Status | 11-230 | ⚠️ UPDATE | Missing today's changes (config, memory, files API) |
| Recent Changes | 231-400 | ✅ OK | Good detail, but should add 2026-02-02 evening |
| History Loading Architecture | 401-480 | ❌ DEPRECATED | R2-based, we use Fly volumes now |
| Chat UI Architecture | 481-550 | ✅ OK | Still accurate |
| MVP Features Table | 551-620 | ⚠️ UPDATE | Files now implemented, not "Planned" |
| Chat System Architecture | 621-750 | ✅ OK | Accurate diagram |
| Stripe Integration | 751-820 | ✅ OK | Still accurate |
| Executive Summary | 821-880 | ✅ OK | Good positioning |
| Market Opportunity | 881-950 | ✅ OK | Evergreen content |
| Product Requirements | 951-1050 | ⚠️ REVIEW | Phase breakdown may be outdated |
| Architecture Principles | 1051-1100 | ❌ DEPRECATED | "R2-First Design" - we don't use R2 |
| Technical Architecture | 1101-1300 | ❌ DEPRECATED | Moltworker, self-managed Docker sections |
| Multi-User Isolation | 1301-1400 | ❌ DEPRECATED | Cloudflare Sandbox SDK - we use Fly.io |
| Self-Managed Docker | 1401-1500 | ❌ DEPRECATED | Not using Hetzner containers |
| Gateway Authentication | 1501-1650 | ❌ DEPRECATED | Path-based proxy architecture - we use Fly URLs |
| Custom Chat UI | 1651-1680 | ✅ OK | Assistant-ui reference valid |
| Scaling Strategy | 1681-1700 | ❌ DEPRECATED | Hetzner scaling - not relevant |
| Business Model | 1701-1800 | ⚠️ REVIEW | Pricing may have changed |
| Automna Credits | 1801-1850 | ⚠️ REVIEW | Credits system - is this implemented? |
| User Experience | 1851-1950 | ✅ OK | Flows still relevant |
| Go-to-Market | 1951-2050 | ✅ OK | Strategy content |
| Competitive Analysis | 2051-2120 | ✅ OK | Market positioning |
| Risks & Mitigations | 2121-2150 | ✅ OK | Still relevant |
| Success Metrics | 2151-2200 | ✅ OK | Evergreen |
| Timeline | 2201-2250 | ❌ DEPRECATED | Week 1-10 timeline from January |
| Current Status (old) | 2251-2300 | ❌ DEPRECATED | "2026-01-29" status section |
| BYOT Section | 2301-2450 | ⚠️ MOVE | Future feature - move to separate doc |
| Appendix | 2451-end | ✅ OK | Landing copy, competitor refs |

### Required Changes

1. **Update header** - Version 0.3, Date 2026-02-02
2. **Update Current Status** - Add today's work:
   - Config system with workspace injection
   - Memory enabled by default
   - Files API implemented
   - Docker image with session key fixer
3. **Mark deprecated sections** with ~~strikethrough~~ and `[DEPRECATED]` notes
4. **Move to archive:**
   - R2-First Design section
   - Multi-User Isolation (Cloudflare) section
   - Self-Managed Docker section
   - Hetzner scaling section
   - Week 1-10 timeline
5. **Update MVP table** - Files API now ✅ Done
6. **Move BYOT** to `docs/FUTURE-BYOT.md`

---

## docs/AGENT-CONFIG-SYSTEM.md

**Status:** ✅ VERIFIED  
**Created:** 2026-02-02  
**Last Updated:** 2026-02-02

Comprehensive and accurate. Just created today.

---

## docs/FILE-BROWSER-SPEC.md

**Status:** ⚠️ NEEDS UPDATE  
**Created:** 2026-02-02

- API spec is accurate
- Implementation section needs update (we implemented it)
- Phase 1-4 checklist needs status updates

---

## docs/PER-USER-SETUP.md

**Status:** ⚠️ NEEDS REVIEW  
**Created:** 2026-02-01

Need to verify against actual provisioning code.

---

## docs/FLY-MIGRATION-PLAN.md

**Status:** ⚠️ NEEDS REVIEW

Migration is complete - document should be marked as historical reference.

---

## docs/FILE-SYSTEM-SPEC.md

**Status:** ❌ CHECK IF SUPERSEDED

May be superseded by FILE-BROWSER-SPEC.md. Need to compare.

---

## docs/FILE-SYSTEM-INTEGRATION.md

**Status:** ❌ CHECK IF SUPERSEDED

Same - may be old planning doc.

---

## docs/INFRASTRUCTURE-COMPARISON.md

**Status:** ❌ ARCHIVE

Historical comparison doc - decision made (Fly.io). Move to archive.

---

## docs/SIDEBAR-SPEC.md

**Status:** ⚠️ NEEDS REVIEW

Check if conversation sidebar implementation matches spec.

---

## docs/WORKFLOW-TEMPLATE.md

**Status:** ✅ OK

Template file, still useful.

---

## moltworker/ directory

**Status:** ❌ DEPRECATED

Entire Moltworker codebase is deprecated. We migrated to Fly.io.

Files:
- `moltworker/AGENTS.md` - Old agent instructions
- `moltworker/DEPRECATED.md` - Already marked deprecated
- `moltworker/README.md` - Old setup instructions

**Action:** Keep for reference but clearly mark as deprecated.

---

## fly/ directory

**Status:** ⚠️ REVIEW

Contains old shared gateway config. Per-user provisioning is now in `landing/src/app/api/user/provision/route.ts`.

**Action:** Update or remove.

---

## Archive Review

Files already in `docs/archive/` - these are correctly archived:
- ADMIN-CONSOLE-SPEC.md
- browserbase-agentmail-integration.md
- chat-implementation-notes.md
- CHAT-UI-SPEC.md
- deployment-lessons.md
- gateway-chat-integration.md
- IMPLEMENTATION.md
- MULTI-USER-ISOLATION.md
- MVP-STEPS.md
- PROTOTYPE.md
- prototype-session-2026-01-29.md
- SCALABILITY-AUDIT.md
- testing-auth-flow.md
- TEST-SPEC.md
- USER-INITIALIZATION.md

✅ Archive is well-organized.

---

## Summary

### High Priority (Do Now)
1. Update SPEC.md Current Status section
2. Mark deprecated sections in SPEC.md
3. Update FILE-BROWSER-SPEC.md with implementation status

### Medium Priority
1. Review PER-USER-SETUP.md against code
2. Archive INFRASTRUCTURE-COMPARISON.md
3. Mark moltworker/ as deprecated
4. Review fly/ directory

### Low Priority
1. Move BYOT section to separate doc
2. Clean up old timeline sections
3. Review SIDEBAR-SPEC.md

---

## Execution Plan

1. Start with SPEC.md - most important
2. Update status tables
3. Add deprecation notices
4. Move content to archive where appropriate
5. Update related docs
6. Commit with clear message
